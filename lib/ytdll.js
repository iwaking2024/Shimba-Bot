import _0x4c185e from'ytdl-core';import _0x178a64 from'readline';import _0x798d7c from'fluent-ffmpeg';import _0xa9882a from'fs';import{randomBytes}from'crypto';const ytIdRegex=/(?:youtube\.com\/\S*(?:(?:\/e(?:mbed))?\/|watch\?(?:\S*?&?v\=))|youtu\.be\/)([a-zA-Z0-9_-]{6,11})/;class YT{constructor(){}static ['isYTUrl']=_0x6d2779=>{return ytIdRegex['test'](_0x6d2779);};static ['getVideoID']=_0x275d50=>{if(!this['isYTUrl'](_0x275d50))throw new Error('is\x20not\x20YouTube\x20URL');return ytIdRegex['exec'](_0x275d50)[0x1];};static ['mp3']=async _0xdad7b9=>{try{if(!_0xdad7b9)throw new Error('Video\x20ID\x20or\x20YouTube\x20Url\x20is\x20required');_0xdad7b9=this['isYTUrl'](_0xdad7b9)?'https://www.youtube.com/watch?v='+this['getVideoID'](_0xdad7b9):_0xdad7b9;const {videoDetails:_0x2de6a1}=await _0x4c185e['getInfo'](_0xdad7b9,{'lang':'id'});let _0x1386e3=_0x4c185e(_0xdad7b9,{'requestOptions':{'headers':{'cookie':'ISITOR_INFO1_LIVE=C0N8P8YKBPA;\x20PREF=tz=America.Bogota&f5=20000;\x20VISITOR_PRIVACY_METADATA=CgJQRRICGgA%3D;\x20YSC=F124HPwH5Tk;\x20HSID=ANMLlrOaE0U-Y9XCx;\x20SSID=A7jofnRgyop0pJcA8;\x20APISID=n6SY-W-U79WMcMi5/ANLbUtthWezCHSl58;\x20SAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20__Secure-1PAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20__Secure-3PAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20YTSESSION-1b=ANPz9Kj3kneHXWVd/cloLDglSZTXhG+rbQ+5A7pXe4ThWYQ8rHRQr/mpDnEVOIc4PEpOo34pArbBqPItpFUmcRF7rBrbvY8o3qIyjm7pPyQcuuM=;\x20GPS=1;\x20SID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8gTdvx6Oug-zMeHzNA-0hvLw.;\x20__Secure-1PSID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8gzfBOB25007gw93sW0fZZBw.;\x20__Secure-1PSIDTS=sidts-CjIBSAxbGSjJ0ofY2vRCVz8xqU2RHXjyE-VqNeez6nkw8jvOZ5xtUFTPzutu1nM3OvSrJxAA;\x20__Secure-3PSIDTS=sidts-CjIBSAxbGSjJ0ofY2vRCVz8xqU2RHXjyE-VqNeez6nkw8jvOZ5xtUFTPzutu1nM3OvSrJxAA;\x20__Secure-3PSID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8g6hK1AfHBNbTFevBaBQPuvA.;\x20LOGIN_INFO=AFmmF2swRQIhAIuauIKMJskoIcXPzomtvy4859ECXJjXKwIL4Fwqi8M-AiBi3HsuFHlV7lQ1cmm3p0MA9MZSsdNDL3RLqyb_aLrKMw:QUQ3MjNmemZrTWlwS2dIcm81YnNzTFRwVVFlLUF6bGh1TzV0ZWpMSFRRYm9XdHdMYnFVUV9kcWNVTVF2QXpzSWROYzE4YkM1RzU2ZjdjUk1BWTFRTm5FS1lFVHpkVXplUzF1ZGhmMTJvZW9Ca2x1Y24zTDl3bG1tSEFILWlWX2ZNRDBCVm9RSm9EZnJPMkFyMUJqaE9uR2xoM3hyVXJWbWtn;\x20CONSISTENCY=AKreu9spRAFkKxEWfUje5J-netwXc64KTkz8ZxGkb2fS0jSkvw7HS3ZlNxyUNMoWb1_0Kzj4kSS6Wb0tulfITpFGHwYqDQyEvRz4lyfhoJV4U9Pa1V7XYEzG5c8QhUyn-KE21gCuwrCyYoLt295cpHM;\x20SIDCC=APoG2W_12yoyWkHPHg7DjiiKJB01vkwulDW9v2gIuS0mUCIpDl7SGkQ8ywiYcwBXal5jnLxZ01s;\x20__Secure-1PSIDCC=APoG2W9XogiNUjt9CjAlbVSb0YTrBJlo_rvOXGqodWmCwyDW_3SPyDLi9b1Co99YVhvhXvlWWPY;\x20__Secure-3PSIDCC=APoG2W8Koq32WwziWG7m1gPuRhj8dxVpdIFrjbUM6rA2vH7wUY-cE16wy6XKz8QfLOuyKshzVjJa'}},'filter':'audioonly','quality':0x8c}),_0x5ac493='./tmp/'+randomBytes(0x3)['toString']('hex')+'.mp3',_0x1d3dbe;_0x1386e3['once']('response',()=>{_0x1d3dbe=Date['now']();}),_0x1386e3['on']('progress',(_0x355a95,_0x1d0832,_0x4a1517)=>{const _0x366c42=_0x1d0832/_0x4a1517,_0x2aaa7d=(Date['now']()-_0x1d3dbe)/0x3e8/0x3c,_0x15388b=_0x2aaa7d/_0x366c42-_0x2aaa7d;_0x178a64['cursorTo'](process['stdout'],0x0),process['stdout']['write']((_0x366c42*0x64)['toFixed'](0x2)+'%\x20downloaded\x20'),process['stdout']['write']('('+(_0x1d0832/0x400/0x400)['toFixed'](0x2)+'MB\x20of\x20'+(_0x4a1517/0x400/0x400)['toFixed'](0x2)+'MB)\x0a'),process['stdout']['write']('running\x20for:\x20'+_0x2aaa7d['toFixed'](0x2)+'minutes'),process['stdout']['write'](',\x20estimated\x20time\x20left:\x20'+_0x15388b['toFixed'](0x2)+'minutes\x20'),_0x178a64['moveCursor'](process['stdout'],0x0,-0x1);}),_0x1386e3['on']('end',()=>process['stdout']['write']('\x0a\x0a')),_0x1386e3['on']('error',_0x39b39b=>console['log'](_0x39b39b));const _0x3cb644=await new Promise(_0x3d0b9c=>{_0x798d7c(_0x1386e3)['audioFrequency'](0xac44)['audioChannels'](0x2)['audioBitrate'](0x80)['audioCodec']('libmp3lame')['audioQuality'](0x5)['toFormat']('mp3')['save'](_0x5ac493)['on']('end',()=>{_0x3d0b9c(_0x5ac493);});});return{'meta':{'channelUrl':_0x2de6a1['author']['channel_url'],'views':_0x2de6a1['viewCount'],'category':_0x2de6a1['category'],'id':_0x2de6a1['videoId'],'url':_0x2de6a1['video_url'],'publicDate':_0x2de6a1['publishDate'],'uploadDate':_0x2de6a1['uploadDate'],'keywords':_0x2de6a1['keywords'],'title':_0x2de6a1['title'],'channel':_0x2de6a1['author']['name'],'seconds':_0x2de6a1['lengthSeconds'],'image':_0x2de6a1['thumbnails']['slice'](-0x1)[0x0]['url']},'path':_0x3cb644,'size':_0xa9882a['statSync'](_0x5ac493)['size']};}catch(_0x495a09){throw _0x495a09;}};static ['mp4']=async _0x215187=>{try{if(!_0x215187)throw new Error('Video\x20ID\x20or\x20YouTube\x20Url\x20is\x20required');_0x215187=this['isYTUrl'](_0x215187)?'https://www.youtube.com/watch?v='+this['getVideoID'](_0x215187):_0x215187;const {videoDetails:_0x290cd8}=await _0x4c185e['getInfo'](_0x215187,{'lang':'id'});console['log'](_0x290cd8);let _0x1952de=_0x4c185e(_0x215187,{'requestOptions':{'headers':{'cookie':'ISITOR_INFO1_LIVE=C0N8P8YKBPA;\x20PREF=tz=America.Bogota&f5=20000;\x20VISITOR_PRIVACY_METADATA=CgJQRRICGgA%3D;\x20YSC=F124HPwH5Tk;\x20HSID=ANMLlrOaE0U-Y9XCx;\x20SSID=A7jofnRgyop0pJcA8;\x20APISID=n6SY-W-U79WMcMi5/ANLbUtthWezCHSl58;\x20SAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20__Secure-1PAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20__Secure-3PAPISID=7I0Je63HDw5qNtsd/A6kfwXpaWpL9oWNCS;\x20YTSESSION-1b=ANPz9Kj3kneHXWVd/cloLDglSZTXhG+rbQ+5A7pXe4ThWYQ8rHRQr/mpDnEVOIc4PEpOo34pArbBqPItpFUmcRF7rBrbvY8o3qIyjm7pPyQcuuM=;\x20GPS=1;\x20SID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8gTdvx6Oug-zMeHzNA-0hvLw.;\x20__Secure-1PSID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8gzfBOB25007gw93sW0fZZBw.;\x20__Secure-1PSIDTS=sidts-CjIBSAxbGSjJ0ofY2vRCVz8xqU2RHXjyE-VqNeez6nkw8jvOZ5xtUFTPzutu1nM3OvSrJxAA;\x20__Secure-3PSIDTS=sidts-CjIBSAxbGSjJ0ofY2vRCVz8xqU2RHXjyE-VqNeez6nkw8jvOZ5xtUFTPzutu1nM3OvSrJxAA;\x20__Secure-3PSID=aQizKdEFw5-p5KcnHIHgPWALDWZSyYJmFsyl7wWOi7fu_X8g6hK1AfHBNbTFevBaBQPuvA.;\x20LOGIN_INFO=AFmmF2swRQIhAIuauIKMJskoIcXPzomtvy4859ECXJjXKwIL4Fwqi8M-AiBi3HsuFHlV7lQ1cmm3p0MA9MZSsdNDL3RLqyb_aLrKMw:QUQ3MjNmemZrTWlwS2dIcm81YnNzTFRwVVFlLUF6bGh1TzV0ZWpMSFRRYm9XdHdMYnFVUV9kcWNVTVF2QXpzSWROYzE4YkM1RzU2ZjdjUk1BWTFRTm5FS1lFVHpkVXplUzF1ZGhmMTJvZW9Ca2x1Y24zTDl3bG1tSEFILWlWX2ZNRDBCVm9RSm9EZnJPMkFyMUJqaE9uR2xoM3hyVXJWbWtn;\x20CONSISTENCY=AKreu9spRAFkKxEWfUje5J-netwXc64KTkz8ZxGkb2fS0jSkvw7HS3ZlNxyUNMoWb1_0Kzj4kSS6Wb0tulfITpFGHwYqDQyEvRz4lyfhoJV4U9Pa1V7XYEzG5c8QhUyn-KE21gCuwrCyYoLt295cpHM;\x20SIDCC=APoG2W_12yoyWkHPHg7DjiiKJB01vkwulDW9v2gIuS0mUCIpDl7SGkQ8ywiYcwBXal5jnLxZ01s;\x20__Secure-1PSIDCC=APoG2W9XogiNUjt9CjAlbVSb0YTrBJlo_rvOXGqodWmCwyDW_3SPyDLi9b1Co99YVhvhXvlWWPY;\x20__Secure-3PSIDCC=APoG2W8Koq32WwziWG7m1gPuRhj8dxVpdIFrjbUM6rA2vH7wUY-cE16wy6XKz8QfLOuyKshzVjJa'}},'filter':'audioandvideo','quality':'highestvideo'}),_0x16193a='./tmp/'+randomBytes(0x3)['toString']('hex')+'.mp4',_0x20be46;_0x1952de['once']('response',()=>{_0x20be46=Date['now']();}),_0x1952de['on']('progress',(_0x1ca953,_0x2ed1b3,_0xf9b5f1)=>{const _0x55691c=_0x2ed1b3/_0xf9b5f1,_0x547318=(Date['now']()-_0x20be46)/0x3e8/0x3c,_0x45c98b=_0x547318/_0x55691c-_0x547318;_0x178a64['cursorTo'](process['stdout'],0x0),process['stdout']['write']((_0x55691c*0x64)['toFixed'](0x2)+'%\x20downloaded\x20'),process['stdout']['write']('('+(_0x2ed1b3/0x400/0x400)['toFixed'](0x2)+'MB\x20of\x20'+(_0xf9b5f1/0x400/0x400)['toFixed'](0x2)+'MB)\x0a'),process['stdout']['write']('running\x20for:\x20'+_0x547318['toFixed'](0x2)+'minutes'),process['stdout']['write'](',\x20estimated\x20time\x20left:\x20'+_0x45c98b['toFixed'](0x2)+'minutes\x20'),_0x178a64['moveCursor'](process['stdout'],0x0,-0x1);}),_0x1952de['on']('end',()=>process['stdout']['write']('\x0a\x0a')),_0x1952de['on']('error',_0x1838c2=>console['log'](_0x1838c2));const _0x35ab53=await new Promise(_0x2dca54=>{_0x798d7c(_0x1952de)['toFormat']('mp4')['save'](_0x16193a)['on']('end',()=>{_0x2dca54(_0x16193a);});});return{'meta':{'channelUrl':_0x290cd8['author']['channel_url'],'views':_0x290cd8['viewCount'],'category':_0x290cd8['category'],'id':_0x290cd8['videoId'],'url':_0x290cd8['video_url'],'publicDate':_0x290cd8['publishDate'],'uploadDate':_0x290cd8['uploadDate'],'keywords':_0x290cd8['keywords'],'title':_0x290cd8['title'],'channel':_0x290cd8['author']['name'],'seconds':_0x290cd8['lengthSeconds'],'image':_0x290cd8['thumbnails']['slice'](-0x1)[0x0]['url']},'path':_0x35ab53,'size':_0xa9882a['statSync'](_0x16193a)['size']};}catch(_0x168f5e){throw _0x168f5e;}};}export default YT;