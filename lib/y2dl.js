import{stat}from'fs';import _0x3db5bd from'node-fetch';const sleep=async _0x55c2ed=>new Promise(_0x395054=>setTimeout(_0x395054,_0x55c2ed)),bestFormat=(_0x7686c3,_0x49c4ff)=>new Promise(async(_0x36d93f,_0x5a5f8d)=>{const _0x38e2f2=await _0x3db5bd('https://srvcdn8.2convert.me/api/json?url='+_0x7686c3,{'method':'GET','headers':{'origin':'https://en1.y2mate.is','referer':'https://en1.y2mate.is/','user-agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/113.0.0.0\x20Safari/537.36\x20OPR/99.0.0.0'}}),_0x2fa8fc=await _0x38e2f2['json']();if(_0x2fa8fc['error']==!![])_0x5a5f8d(![]);const _0x853ddf=_0x2fa8fc['formats'];if(_0x49c4ff=='audio'){const _0x12bc85=_0x853ddf['audio'];let _0x56e965=_0x12bc85['find'](_0x39a5e4=>_0x39a5e4['quality']==0xc0);if(!_0x56e965)_0x56e965=_0x12bc85['find'](_0x3ef490=>_0x3ef490['quality']==0x80);if(!_0x56e965)_0x56e965=_0x12bc85['find'](_0x380d42=>_0x380d42['quality']==0x40);if(!_0x56e965)_0x56e965=_0x12bc85['find'](_0x2bff08=>_0x2bff08['quality']==0x30);if(!_0x56e965)return _0x5a5f8d(![]);return _0x36d93f(_0x56e965);}if(_0x49c4ff=='video'){if(_0x853ddf['video']['length']==0x0)return _0x5a5f8d(![]);const _0x18130e=_0x853ddf['video'][_0x853ddf['video']['length']-0x1];return _0x36d93f(_0x18130e);}}),getUrlDl=_0x1ebf70=>new Promise(async(_0x3bc077,_0x212456)=>{const _0x142aa3=await _0x3db5bd('https://srvcdn8.2convert.me/api/json',{'method':'POST','headers':{'content-type':'application/x-www-form-urlencoded;\x20charset=UTF-8','origin':'https://en1.y2mate.is','referer':'https://en1.y2mate.is/','user-agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/113.0.0.0\x20Safari/537.36\x20OPR/99.0.0.0'},'body':'hash='+encodeURIComponent(_0x1ebf70)}),_0x25afe0=await _0x142aa3['json']();if(_0x25afe0['error'])return _0x212456(![]);let _0xa97d73=![];while(_0xa97d73==![]){await sleep(0x3e8);const _0x5142d0=await _0x3db5bd('https://srvcdn8.2convert.me/api/json/task',{'method':'POST','headers':{'content-type':'application/x-www-form-urlencoded;\x20charset=UTF-8','origin':'https://en1.y2mate.is','referer':'https://en1.y2mate.is/','user-agent':'Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/113.0.0.0\x20Safari/537.36\x20OPR/99.0.0.0'},'body':'taskId='+_0x25afe0['taskId']}),_0x2c10aa=await _0x5142d0['json']();if(_0x2c10aa['error'])return _0x212456(![]);if(_0x2c10aa['status']=='finished'){_0xa97d73=!![],_0x3bc077(_0x2c10aa);break;}if(_0x2c10aa['status']=='error')return _0x212456(![]);}});export{bestFormat,getUrlDl};